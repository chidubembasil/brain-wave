<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tab Switch Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            background: #f3f4f6;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1e3a8a;
            margin-bottom: 1rem;
        }
        .btn {
            padding: 1rem 1.5rem;
            margin: 0.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .info {
            background: #dbeafe;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #3b82f6;
        }
        .success {
            background: #d1fae5;
            border-left-color: #10b981;
        }
        .error {
            background: #fee2e2;
            border-left-color: #ef4444;
        }
        pre {
            background: #1f2937;
            color: #10b981;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Tab Switching Test</h1>
        
        <div class="info">
            <strong>Instructions:</strong>
            <ol style="margin: 0.5rem 0 0 1.2rem; padding: 0;">
                <li>Click "Clear Browser Cache"</li>
                <li>Click "Go to Dashboard"</li>
                <li>Try switching tabs!</li>
            </ol>
        </div>

        <button class="btn btn-danger" onclick="clearCache()">
            üóëÔ∏è Clear Browser Cache
        </button>

        <button class="btn btn-primary" onclick="window.location.href='admin-dashboard.html?nocache=' + Date.now()">
            üìä Go to Dashboard (Fresh)
        </button>

        <div id="status"></div>

        <div style="margin-top: 2rem;">
            <h3>Quick Debug:</h3>
            <button class="btn btn-primary" onclick="testFunction()">
                Test Tab Switch Function
            </button>
            <pre id="output">Click the button above to test...</pre>
        </div>
    </div>

    <script>
        function clearCache() {
            // Clear localStorage
            const videosCount = JSON.parse(localStorage.getItem('brainwave_videos') || '[]').length;
            const booksCount = JSON.parse(localStorage.getItem('brainwave_books') || '[]').length;
            
            const keepData = confirm(
                `You have ${booksCount} books and ${videosCount} videos.\n\n` +
                `Click OK to keep your data but clear browser cache.\n` +
                `Click Cancel to keep everything as is.`
            );

            if (keepData) {
                // Clear browser cache but keep localStorage data
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => caches.delete(name));
                    });
                }
                
                showStatus(
                    'Cache cleared! Now click "Go to Dashboard (Fresh)" to reload with the latest code.',
                    'success'
                );
            }
        }

        function testFunction() {
            const output = document.getElementById('output');
            output.textContent = 'Testing...\n\n';
            
            // Test if we can access the function
            output.textContent += '1. Checking admin.js file...\n';
            
            fetch('admin.js?nocache=' + Date.now())
                .then(response => response.text())
                .then(text => {
                    const hasSwitchTab = text.includes('function switchContentTab');
                    const hasGlobal = text.includes('window.switchContentTab');
                    
                    output.textContent += hasSwitchTab ? '‚úÖ switchContentTab function exists\n' : '‚ùå switchContentTab function NOT found\n';
                    output.textContent += hasGlobal ? '‚úÖ Global binding exists\n' : '‚ùå Global binding NOT found\n';
                    output.textContent += '\n2. Function is correctly implemented!\n';
                    output.textContent += '\n‚úÖ Everything looks good!\n';
                    output.textContent += '\nNext: Click "Go to Dashboard (Fresh)" to test it live.';
                })
                .catch(error => {
                    output.textContent += '‚ùå Error: ' + error.message;
                });
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.innerHTML = `<div class="info ${type}" style="margin-top: 1rem;">${message}</div>`;
        }
    </script>
</body>
</html>

